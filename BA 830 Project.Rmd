---
title: "BA 830 Project"
author: "Team 10"
date: "4/26/2021"
output:
  pdf_document: default
  html_document: default
---
<style type="text/css">

body{ /* Normal  */
      font-size: 12px;
  }
td {  /* Table  */
  font-size: 8px;
}
h1.title {
  font-size: 24px;
  color: DarkRed;
}
h1 { /* Header 1 */
  font-size: 22px;
  color: DarkBlue;
}
h2 { /* Header 2 */
    font-size: 20px;
  color: DarkBlue;
}
h3 { /* Header 3 */
  font-size: 16px;
  font-family: "Times New Roman", Times, serif;
  color: DarkBlue;
}
code.r{ /* Code block */
    font-size: 12px;
}
pre { /* Code block - determines code spacing between lines */
    font-size: 14px;
}
</style>

Team members: Paula Demacker, Yuchen Feng, Leah Fowlkes, Ryan Veytsman, Xinping Yu, Yuzhe Zheng
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
options(scipen=1, digits=3)
```

```{r, echo=FALSE}
#library
library(data.table)
library(tidyverse)
library(lfe)
library(fixest)
library(lubridate)
library(stargazer)
library(modelsummary)
```

```{r}
#import the file
food <- fread('BA830-Project.csv')
```

```{r}
food %>% mutate (outcome_plate = recode (outcome_plate, '0' = 1, '1' = 0))
```

```{r}
#data cleaning
#gender
food$gender_group[food$Gender == 'Man'] <- 1
food$gender_group[food$Gender == 'Woman'] <- 0
#age
food$age_group[food$Age == '16-25'] <- 1
food$age_group[food$Age == '26-35'] <- 2
food$age_group[food$Age == '36-45'] <- 3
food$age_group[food$Age == '46-55'] <- 4
food$age_group[food$Age == '56-65'] <- 5
```

```{r}
#proportion test
prop.test(nrow(food[Treatment ==  1])/10, nrow(food)/10, 0.5)
```
The p value here is 0.3 which is larger than 0.05, so we fail to reject the null hypothesis and prove that our experiment of treatment and control group was well randomized.

```{r}
food
```

```{r}
# Randomization / balance check for pre-treatment outcomes between the treatment and control group.
t.test(food[Treatment == 1, age_group], food[Treatment == 0, age_group])
```

```{r}
t.test(food[Treatment == 1, gender_group], food[Treatment == 0, gender_group])
```

```{r}
reg.age <- lm(age_group ~ Treatment, data = food)
summary(reg.age)
```

```{r}
reg.gender <- lm(gender_group ~ Treatment, data = food)
summary(reg.gender)
```

```{r}
reg.plate <- lm(outcome_plate ~ Treatment, data = food)
summary(reg.plate)
```

```{r}
reg.question <- lm(outcome_question ~ Treatment, data = food)
summary(reg.question)
```
# Regression 
```{r}
together <- feols(c(outcome_plate, outcome_food) ~ Treatment, 
                   data = food, se = 'white')
etable(together)
```
In the regression of model 1 we looked at the outcome_plate as the outcome variable first. We get an intercept of 0.5312, which represents the mean of the outcome of our control group. The estimate for the treatment effect is 0.1737 and has a standard error of 0.0227. Therefore, we have a positive treatment effect which indicates a positive relationship between Treatment and outcome_plate.\
We know from the stars that this result is statistically significant. This means that people in the treatment group are more likely to choose the red plate. 

For model 2 we used outcome_food as our outcome variable. The intercept is 0.4865. Our estimated treatment effect is -0.0828 and has a standard error of 0.0236. This indicates that we have a negative relationship between Treatment and outcome_food. These results are also statistically significant. It still indicates that people in the treatment group are more likely to choose the food on the red plate. The negtaive treatment effect shows us that people in the treatment group are more likely to choose the plate that is positioned on the right. 

```{r}
fixed_effects <- feols(outcome_plate ~ Treatment 
                  | outcome_food + food_name, data = food,
            se = 'white')
etable(fixed_effects)
```
For the regression above we added two fixed effects: outcome_food and food_name to see if the food has an impact on the outcome. The outcome variable is outcome_plate and has an estimated treatment effect of 0.1788 with an standard error of 0.0230, which is really similar to the regression above without the fixed effects. The results of this regression are also statistically significant.  


```{r}

```
## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
